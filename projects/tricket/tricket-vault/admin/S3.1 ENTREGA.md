---
source: Clickup
type: task
id: 86a9jh8a0
action: create
space: Projetos
folder: Tricket
list: Dev. Marketplace
parent_id: 86a9jh84n
due_date: ""
created: 2025-06-18
path: /home/joaohenrique/Obsidian/01-PROJETOS/tricket-revisar/Revisar
---
# Mensagem para o Cliente

Finalizei o processo de onboarding de acordo com alteração que vocês pediram.

Foi preciso reconstruir o banco de dados, pois a estrutura de usuários é a base do sistema e afeta todas as outras tabelas. Implementei um novo esquema, mais robusto e flexível, para acomodar diferentes perfis de usuário.

Principais mudanças na estrutura de usuários:

- Usuários podem pertencer a múltiplas empresas.
- Empresas podem ter múltiplos usuários.

Novos perfis de usuário:

**Pessoa Física:**

- **Consumidor:** (Requer aprovação do admin; possui conta Asaas)
- **Colaborador:** (Sem conta Asaas; atua como colaborador de empresa – comerciante ou fornecedor)

**Pessoa Jurídica:**

- **Consumidor PJ:** (Requer aprovação do admin; possui conta Asaas)
- **Fornecedor:** (Requer aprovação do admin; possui conta Asaas)
- **Comerciante:** (Requer aprovação do admin; possui conta Asaas e Cappta)

Vocês podem testar o fluxo de cadastro do usuário por este link:

[https://app.tricket.com.br/cadastro](https://app.tricket.com.br/cadastro)

✅ Login social com Google

✅ Responsividade (Mobile, Tablet, Desktop)

✅ Envio de e-mail de confirmação

## **FEEDBACK 1**

### 🗒️**Contexto**

Pedro fez um cadastro como pessoa física e em seguida tentou fazer um segundo cadastro como pessoa jurídica

### ⚠️**Erro**

Erro inesperado ao cadastrar

organização (SQLSTATE: 23502): null

value in column "auth_user_id" of

relation "individual_details" violates not-

null constraint

### 🔍**Investigação**

Identifiquei que o erro aconteceu porque a segunda conta não teve o e-mail confirmado

Pedro alegou que no primeiro cadastro apareceu a tela de confirmação de email, porém no segundo não apareceu, foi direto para o cadastro do perfil.

Isso indica que de alguma forma ficou armazenado nos cookies as informações do primeiro cadastro

### 👨‍💻 **Tratativa**

- Verificar o CPF do usuário no inicio do formulário e não permitir avançar

- errorMessage: Este CPF já está associado a outra conta de acesso. Por favor, faça login com sua conta existente para adicionar uma nova empresa, ou entre em contato com o suporte.

- Criar uma página página de verificação quando um usuário logado quer acessar a página de cadastro para criar uma nova conta, nesta página exibir o perfil logado e a opção de Cadastrar Empresa

## ✅ Checklist

- Implementar verificação de CPF
- Incluir nova página `perfis` em Páginas Onboarding

## **FEEDBACK 2**

### 🗒️**Contexto**

**Contexto:** Ao cadastrar uma empresa Pedro sentiu falta do Tipo de empresa (Sociedade Anônima S.A)

### 🔍**Investigação**

Usamos as opções pré-definidas pelo parâmetro `companyType` do asaas:

- MEI
- LIMITED
- ASSOCIATION
- INDIVIDUAL

### 👨‍💻 **Tratativa**

- Enviar e-mail para o suporte

## ✅ Checklist

- Email Enviado (26/07)