---
id: 1MWW6F9VL0zK3nfg_XAuJBGf_edUvgHWQXyAHhifvWeA
status: 
version: 1
source: NotebookLM
type: task
action: create
space: Projetos
folder: Tricket
list: Marketplace
parent_id: 
created: 2025-07-08 09:09
due_date: ""
start_date: 
tags:
  - projetos/tricket
summary: 
path: /home/joaohenrique/Obsidian/01-PROJETOS/tricket-revisar
---



# Autenticação

De que forma o Asaas identifica quem é você?

[Suggest Edits](https://docs.asaas.com/edit/autentica%C3%A7%C3%A3o-1)

A autenticação em nossa API é feita através do uso de uma **chave de API**. É através desta chave que nosso sistema identifica a sua conta e permite a comunicação conosco em nome da conta em questão.

Caso a chave de API seja inválida, não seja informada ou o header esteja incorreto, nossa API retornará `HTTP 401`.

A segurança da chave de API é de responsabilidade do cliente. Para reforçar sua segurança, recomendamos que você utilize também os demais mecanismos de proteção disponíveis. Considere definir endereços IP autorizados para adicionar uma camada extra de segurança. Para mais detalhes, consulte as medidas de segurança na documentação: [Mecanismos adicionais de segurança](https://docs.asaas.com/docs/mecanismos-de-seguranca).

> ## 🚧
> 
> **Atenção:**
> 
> - Após a geração da chave de API em nossa interface, armazene-a diretamente em seu cofre de chaves, evitando que seja exposta em mensagens de qualquer tipo ou emails. **Nunca deixe a chave de API diretamente no código fonte de seus sistemas.**
> - **Não informe sua chave de API em atendimentos, a terceiros ou exponha no front-end da sua aplicação.** Garanta que sua aplicação não exponha a chave em logs de sistema.
> - Caso seu time de desenvolvimento utilize a **chave de API de Produção** nos ambientes de desenvolvimento ou homologação durante os testes finais da integração, é essencial renová-la antes da entrada em produção, garantindo que o menor número de pessoas possível tenha acesso a ela.
> - Utilize pelo menos um dos mecanismos adicionais de segurança [descritos aqui](https://docs.asaas.com/docs/mecanismos-de-seguranca).
> - A chave de API é irrecuperável, caso seja perdida, é necessário a geração de uma nova.

### Utilize os headers abaixo em todas as suas chamadas para a API

[](https://docs.asaas.com/docs/autentica%C3%A7%C3%A3o-1#utilize-os-headers-abaixo-em-todas-as-suas-chamadas-para-a-api)

```JSON
{
"Content-Type": "application/json", 
"User-Agent": "nome_da_sua_aplicação", 
"access_token": "sua_api_key"
}
```

> ## 🚧
> 
> Importante
> 
> É obrigatório enviar o `User-Agent` no header de todas as requisições em novas contas raiz criadas a partir de **13/06/2024**. Sugerimos enviar o nome da sua aplicação caso o seu framework não adicione um User-Agent padrão.

> ## 📘
> 
> Ambientes distintos (Sandbox e Produção)
> 
> As Chaves de API são distintas entre os ambientes de Sandbox e Produção, portanto lembre-se de alterá-la quando mudar a URL.

> ## ❗️
> 
> ATENÇÃO: Para testar os endpoints direto nesta documentação você precisa de uma chave de API de Sandbox
> 
> **Caso seja utilizada a chave de produção, obterá o erro [401 Unauthorized](https://docs.asaas.com/docs/erros-_comuns_-copy-1).**
> 
> Todos os endpoints da documentação apontam para nosso Sandbox, o ambiente de testes do Asaas. Antes de começar você deve [criar uma conta de testes](https://sandbox.asaas.com/onboarding/createAccount?customerSignUpOriginChannel=HOME) e usar sua chave de API para testes.
> 
> [Saiba mais sobre o Sandbox](https://docs.asaas.com/docs/sandbox)

Para obter sua Chave de API [acesse a área de integrações](https://www.asaas.com/customerApiAccessToken/index) em nossa **interface web**. Pelo aplicativo não tem a opção de gerar chave. Além disso, apenas usuários do tipo administrador, tem permissão para gerar a chave.

![](https://files.readme.io/f4b7e1df6a46013c6702d8c5fa18485eb7751ca3b4f4781f6521641257838e77-image.png)

> ## 🔒
> 
> Gerenciando suas chaves de API
> 
> - Você pode criar até **10** chaves de API para uma conta Asaas.
> - As chaves podem ser nomeadas, para facilitar a identificação.
> - É possível definir uma data de expiração para cada chave.
> - Você pode desabilitar/habilitar uma chave a qualquer momento, sem de fato inválida-la.
> - Caso a chave seja **excluída**, não é possível restaura-la.

## URL de Produção e Sandbox

[](https://docs.asaas.com/docs/autentica%C3%A7%C3%A3o-1#url-de-produ%C3%A7%C3%A3o-e-sandbox)

Após a criação da conta e geração da chave de API, utilize a URL específica para cada ambiente em suas chamadas, conforme listado abaixo:

|Ambiente|URL|
|---|---|
|Produção|[https://api.asaas.com/v3](https://api.asaas.com/v3)|
|Sandbox|[https://api-sandbox.asaas.com/v3](https://api-sandbox.asaas.com/v3)|

### Teste em ambiente Sandbox

[](https://docs.asaas.com/docs/autentica%C3%A7%C3%A3o-1#teste-em-ambiente-sandbox)

- Durante o desenvolvimento da integração, teste as requisições em nosso ambiente de Sandbox utilizando dados fictícios e direcionando as requisições para o domínio “[https://api-sandbox.asaas.com/v3](https://api-sandbox.asaas.com/v3)", alterando para produção apenas após a validação de todas as funcionalidades.

# Armazenamento seguro para a Chave de API

[](https://docs.asaas.com/docs/autentica%C3%A7%C3%A3o-1#armazenamento-seguro-para-a-chave-de-api)

A **Chave de API** do Asaas segue o modelo de chave “irrecuperável”, isto é, ela **será exibida apenas uma vez quando criada**. Sendo assim, você precisará copiá-la e salvá-la de modo seguro antes de sair da área de integrações.

- Nunca armazene chaves de API em texto claro dentro do código-fonte ou em arquivos de configuração acessíveis ao público.
    
- Utilize mecanismos de segurança, como variáveis de ambiente ou arquivos de configuração protegidos, para armazenar as chaves de API de forma segura.
    
- Utilize serviços de gerenciamento de segredos para armazenar e gerenciar as chaves de API de forma centralizada e segura, como AWS Secrets Manager, Google Cloud Secret Manager e Azure Key Vault, por exemplo.
    

# Transmissão segura da sua Chave de API

[](https://docs.asaas.com/docs/autentica%C3%A7%C3%A3o-1#transmiss%C3%A3o-segura-da-sua-chave-de-api)

- Utilize exclusivamente protocolos de comunicação seguros, como HTTPS, evitando métodos não criptografados, como HTTP.

## Protocolo de segurança TLS (Transport Layer Security)

[](https://docs.asaas.com/docs/autentica%C3%A7%C3%A3o-1#protocolo-de-seguran%C3%A7a-tls-transport-layer-security)

Atualmente nossos sistemas em produção aceitam TLS 1.2 e 1.3 para comunicação. Mas recomendamos o uso do TLS 1.3.

# Controle de acesso e rotação de chave

[](https://docs.asaas.com/docs/autentica%C3%A7%C3%A3o-1#controle-de-acesso-e-rota%C3%A7%C3%A3o-de-chave)

- O acesso à Chave de API deve ser concedido apenas a usuários ou sistemas autorizados que realmente necessitam de acesso aos recursos protegidos.
- Estabeleça um processo de monitoramento dos logs a fim de rastrear a origem e propósito das requisições, de modo a detectar atividades suspeitas ou uso indevido de sua Chave de API. Ferramentas como SIEM, Splunk, ELK Stack, AWS CloudWatch ou Azure Monitor podem auxiliar no processo.
- Estabeleça uma política de rotação regular das chaves de API para reduzir o impacto em caso de comprometimento ou vazamento.
- O armazenamento e segurança da chave apikey é de inteira responsabilidade do cliente, visto que o Asaas não detém dessa informação armazenada em nenhum local de nosso banco.

---

# Mecanismos adicionais de segurança

Utilize os mecanismos abaixo para maior segurança em sua conta.

Além de chave de API que é usada para autenticar suas requisições, possuímos mecanismos adicionais que oferecem camadas extras de segurança para sua conta. Recomendamos utilizar pelo menos um deles, e se possível ambos. Conheça-os abaixo.

## Whitelist de IPs

[](https://docs.asaas.com/docs/mecanismos-de-seguranca#whitelist-de-ips)

Este mecanismo permite definir IPs a partir dos quais aceitaremos requisições utilizando sua chave de API.

Qualquer requisição recebida de um IP não contido na whitelist será recusada com resposta HTTP 403. Desta forma, mesmo que sua chave seja comprometida, a menos que as requisições partam de sua infraestrutura, elas serão recusadas.

Você pode definir a sua lista de IPs autorizados acessando [Menu do usuário > Integrações > Mecanismos de segurança](https://www.asaas.com/customerConfigIntegrations/apiAccessControl).

![](https://files.readme.io/c4671ff-image.png)

> ## 📘
> 
> Configuração de IPs por faixa
> 
> Você consegue adicionar um IP autorizado em uma faixa de IPs, usando o `x`, por exemplo: `192.168.1.x` irá pegar desde o IP `192.168.1.0` até `192.168.1.255`.

### Por que fixar IPs?

[](https://docs.asaas.com/docs/mecanismos-de-seguranca#por-que-fixar-ips)

Fixar IPs para chamadas de API pode ser uma prática útil e necessária por diversas razões.

- **Restrição de Acesso**: Ao fixar IPs, você pode restringir o acesso às suas APIs, permitindo chamadas apenas de IPs específicos. Isso ajuda a bloquear acessos não autorizados ou indesejados, como tentativas de invasão ou ataques DDoS.
- **Autenticação e Filtragem de IP**: Muitas APIs e serviços de backend permitem a configuração de filtros de IP para garantir que apenas sistemas ou servidores conhecidos possam acessar a API. Esse tipo de controle aumenta a segurança do seu sistema.

Fixar IPs para chamadas de API é uma prática que pode oferecer mais controle sobre segurança, desempenho, auditoria e conformidade regulatória. No entanto, isso também exige a manutenção de uma lista de IPs autorizados e pode tornar o gerenciamento de acessos mais complexo. A decisão de fixar ou não os IPs depende muito do contexto de segurança e da infraestrutura da aplicação ou serviço.

## Webhook de autorização de transferências

[](https://docs.asaas.com/docs/mecanismos-de-seguranca#webhook-de-autoriza%C3%A7%C3%A3o-de-transfer%C3%AAncias)

Ao habilitar este mecanismo, todas as transferências solicitadas em sua conta dispararão um webhook para o seu sistema afim de validar a legitimidade das mesmas. Desta forma, a menos que seu sistema reconheça a transferência como legítima, ela será cancelada. Para maiores detalhes no uso deste mecanismo acesso à [documentação](https://docs.asaas.com/docs/mecanismo-para-validacao-de-saque-via-webhooks).

---
# Mecanismo para validação de saque via webhooks

Uma forma de confirmar transferências via um Webhook especial.

O Asaas está constantemente investindo em segurança, e também criando métodos para tornar a sua operação conosco cada vez mais segura e confiável.

Nessa documentação, você encontrará o detalhamento do método de validação de transferências através de Webhooks.

### Ativando mecanismo via interface

[](https://docs.asaas.com/docs/mecanismo-para-validacao-de-saque-via-webhooks#ativando-mecanismo-via-interface)

Para ativar o mecanismo na sua conta, acesse o [Menu do usuário > Integrações > Mecanismos de segurança](https://www.asaas.com/apiAccessControl/index).

![](https://files.readme.io/1151556f343ba745635c3bb784c6623b8aeff4cd640a5c15abed19054445672f-image_1.png)

A configuração é bem simples, você precisa apenas adicionar qual será a URL do seu Webhook, o e-mail para receber notificações de erros e o token de autenticação, ele é opcional, porém sugerimos sempre utilizar. Este token será enviado no header `asaas-access-token` e você pode validá-lo para saber que se trata de uma requisição legítima do Asaas.

> ## 🚧
> 
> Atenção
> 
> Ao realizar a configuração, todas as transferências e saques realizados via API serão tratadas por este mecanismo de segurança.

> ## 📘
> 
> Configuração para estornos Pix
> 
> Para habilitar a configuração de estornos Pix, marque a opção "Ativar autorização de saque para estornos Pix". Vale ressaltar que essa configuração não é obrigatória para saques.

> ## 📘
> 
> Configuração para subcontas
> 
> A configuração é feita automaticamente para todas as subcontas de acordo com a configuração realizada na conta raiz, sejam elas white label ou não.

Você tem a opção de validar também os saques via interface, dessa forma qualquer novo saque realizado na sua conta, seja via API ou via interface irá passar pelo fluxo de validação.

### Fluxo para autorização de saques

[](https://docs.asaas.com/docs/mecanismo-para-validacao-de-saque-via-webhooks#fluxo-para-autoriza%C3%A7%C3%A3o-de-saques)

O fluxo de autorização de saques funciona da seguinte forma:

![](https://files.readme.io/a5ee7a1-fluxo_de_autorizao_de_transferencias.png)

### Como o mecanismo funciona?

[](https://docs.asaas.com/docs/mecanismo-para-validacao-de-saque-via-webhooks#como-o-mecanismo-funciona)

- Você solicitará a transferência via API e armazenará o ID ou mais dados do retorno em sua base de dados.
- O Asaas fará um `POST` cinco segundos após a criação da transferência para a URL configurada com o payload da transferência (os payloads sempre serão os mesmos enviados no retorno da criação).
- Essa requisição pode falhar no máximo três vezes, após a terceira falha a transferência será cancelada automaticamente.
- Você deve verificar se o payload recebido bate com o que possui armazenado.
- Responderá se aprova ou não a transferência.

### Exemplo de requisição que o Asaas irá realizar (Transferência)

``` JSON
{
   "type":"TRANSFER",
   "transfer":{
      "object":"transfer",
      "id":"0bed986c-737d-49bf-a1cc-beca916797c4",
      "dateCreated":"2022-05-27",
      "status":"PENDING",
      "effectiveDate":null,
      "type":"BANK_ACCOUNT",
      "value":22,
      "netValue":22,
      "transferFee":0,
      "scheduleDate":"2022-05-27",
      "confirmedDate":null,
      "failReason":null,
      "bankAccount":{
         "bank":{
            "code":null,
            "ispb":"00000000",
            "name":null
         },
         "accountName":"ASAAS GESTAO FINANCEIRA S.A.",
         "ownerName":"ASAAS GESTAO FINANCEIRA S.A.",
         "cpfCnpj":"70609293000194",
         "agency":"4124",
         "agencyDigit":null,
         "account":"42142",
         "accountDigit":"1",
         "pixAddressKey":null
      },
      "transactionReceiptUrl":null,
      "operationType":"PIX",
      "description":null
   }
}
``` 

### Exemplo de requisição que o Asaas irá realizar (Pague Contas)

``` json
{
   "type":"BILL",
   "bill":{
      "object":"bill",
      "id":623471,
      "status":"PENDING",
      "value":20.0,
      "discount":0,
      "interest":0,
      "fine":0,
      "identificationField":"23793381286001234107143000012345890460000002000",
      "dueDate":"2024-01-01",
      "scheduleDate":"2024-01-01",
      "paymentDate":null,
      "fee":0,
      "description":null,
      "companyName":null,
      "transactionReceiptUrl":null,
      "canBeCancelled":true,
      "failReasons":null,
      "bankId":4,
      "awaitingCriticalActionAuthorization":false,
      "bank":{
         "object":"bank",
         "id":4,
         "code":"237",
         "name":"Bradesco"
      }
   }
}
```
### Exemplo de requisição que o Asaas irá realizar (Pagamento de QRCode)

``` JSON
{
   "type":"PIX_QR_CODE",
   "pixQrCode":{
      "id":"aa10c444-3f02-40e7-a248-2d00cff5a45d",
      "endToEndIdentifier":"E1954055020220714160403012347510",
      "finality":null,
      "value":2,
      "changeValue":null,
      "refundedValue":0,
      "effectiveDate":"2022-07-14 13:04:03",
      "scheduledDate":null,
      "status":"AWAITING_REQUEST",
      "type":"DEBIT",
      "originType":"STATIC_QRCODE",
      "conciliationIdentifier":null,
      "description":null,
      "transactionReceiptUrl":null,
      "refusalReason":null,
      "canBeCanceled":true,
      "originalTransaction":null,
      "externalAccount":{
         "ispb":18236120,
         "ispbName":"NU PAGAMENTOS S.A. - INSTITUI\u00c7\u00c3O DE PAGAMENTO",
         "name":"John Doe",
         "cpfCnpj":"***.123.456-**",
         "addressKey":"john.doe@teste.com",
         "addressKeyType":"EMAIL"
      },
      "qrCode":{
         "payer":null,
         "conciliationIdentifier":null,
         "originalValue":1.00,
         "dueDate":null,
         "interest":0,
         "fine":0,
         "discount":0,
         "expirationDate":null
      },
      "payment":null
   }
}
```

### Exemplo de requisição que o Asaas irá realizar (Recarga de telefone)

``` JSON
{
   "type":"MOBILE_PHONE_RECHARGE",
   "mobilePhoneRecharge":{
      "id":"d29f7fdb-4cf9-4524-a44e-d1f3fd9ec0d3",
      "value":20,
      "phoneNumber":"47999999999",
      "status":"PENDING",
      "canBeCancelled":true,
      "operatorName":"Claro"
   }
}
```

### Exemplo de requisição que o Asaas irá realizar (Estorno Pix)

``` JSON
{
  "type": "PIX_REFUND",
  "pixRefund": {
    "id": "06391ba9-cbf9-4926-8988-374ac5d71cae",
    "transferId": "f3956d6d-6dbb-4882-8146-9df82288d95b",
    "endToEndIdentifier": null,
    "finality": null,
    "value": 200,
    "changeValue": null,
    "refundedValue": 0,
    "dateCreated": "17/12/2024 15:27:42",
    "effectiveDate": "17/12/2024 15:27:42",
    "scheduledDate": null,
    "status": "AWAITING_REQUEST",
    "type": "CREDIT_REFUND",
    "originType": null,
    "conciliationIdentifier": null,
    "description": null,
    "transactionReceiptUrl": null,
    "chargedFeeValue": 0,
    "canBeRefunded": false,
    "refundDisabledReason": "O tipo desta transação não permite que ela seja estornada.",
    "refusalReason": null,
    "canBeCanceled": false,
    "originalTransaction": {
      "id": "b9852968-7825-4458-b069-d266ce8455c9",
      "endToEndIdentifier": "6709a838-7422-4198-94ed-76166a70c595",
      "value": 1000,
      "effectiveDate": "17/12/2024 15:26:57"
    },
    "externalAccount": {
      "ispb": 19540550,
      "ispbName": "ASAAS GESTÃO FINANCEIRA INSTITUIÇÃO DE PAGAMENTO S.A.",
      "name": "John Doe",
      "agency": "0",
      "account": "0000000",
      "accountDigit": "0",
      "accountType": "CHECKING_ACCOUNT",
      "cpfCnpj": "***.138.240-**",
      "addressKey": null,
      "addressKeyType": null
    },
    "qrCode": null,
    "payment": "pay_e4xnd1cc04w2n33n",
    "addressKey": null,
    "addressKeyType": null,
    "externalReference": null
  }
}
```

# Como validar uma transferência

[](https://docs.asaas.com/docs/mecanismo-para-validacao-de-saque-via-webhooks#como-validar-uma-transfer%C3%AAncia)

Ao receber o `POST`, você precisará respondê-lo informando se reconhece a transferência como resposta do próprio `POST`. Para isso é necessário que você retorne um payload com um status.

Os possíveis status são:

**`APPROVED`**

**`REFUSED`**

Também é possível informar o motivo da recusa, retornando junto do payload o refuseReason, exemplo:

``` JSON
{ 
    "status": "REFUSED", 
    "refuseReason": "Transferência não encontrada no nosso banco" 
}
```

Caso a transferência seja reconhecida e aprovada, é preciso responder da seguinte forma:

``` JSON
{ "status": "APPROVED" }
```

Caso não seja retornado nenhum dos dois status ou a requisição apresente falha por 3 vezes consecutivas, daremos a solicitação como falha e **a transferência será cancelada**.