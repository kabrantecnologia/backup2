# Cappta Simulator - Environment Configuration
# Copy this file to .env and adjust values for your environment

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=info

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
BASE_URL=http://localhost:8000

# =============================================================================
# CAPPTA API COMPATIBILITY (Compatibilidade com Edge Functions)
# =============================================================================
# Token Bearer utilizado nas requisições (igual ao usado nas Edge Functions)
API_TOKEN=cappta_fake_token_dev_123
CAPPTA_API_TOKEN=cappta_fake_token_dev_123

# URL base da API Cappta (simulador ou API real)
CAPPTA_API_URL=http://localhost:8000

# CNPJ do reseller principal (usado nas operações)
RESELLER_DOCUMENT=00000000000191

# Rate limiting configuration
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# =============================================================================
# ASAAS INTEGRATION (TRANSFERÊNCIAS)
# =============================================================================
# API key da conta Asaas dedicada ao simulador Cappta
ASAAS_API_KEY=SUBSTITUIR_PELA_API_KEY_REAL

# Base URL da API Asaas (sandbox para desenvolvimento)
ASAAS_BASE_URL=https://sandbox.asaas.com/api/v3

# Account ID da conta mestre Cappta no Asaas
CAPPTA_MASTER_ACCOUNT_ID=SUBSTITUIR_PELO_ACCOUNT_ID_REAL

# =============================================================================
# TRICKET INTEGRATION (WEBHOOKS)
# =============================================================================
# URL do webhook receiver do Tricket (ambiente dev2)
TRICKET_WEBHOOK_URL=https://dev2.tricket.kabran.com.br/functions/v1/cappta_webhook_receiver

# Secret para assinatura de webhooks
TRICKET_WEBHOOK_SECRET=webhook_secret_dev_123

# Base URL da API Tricket para callbacks
TRICKET_API_BASE=https://dev2.tricket.kabran.com.br

# =============================================================================
# SECURITY & ACCESS CONTROL
# =============================================================================
# Lista de IPs permitidos (desenvolvimento: todos, produção: específicos)
ALLOWED_IPS=["127.0.0.1", "localhost", "::1", "0.0.0.0/0"]

# Secret para assinatura HMAC-SHA256 dos webhooks
WEBHOOK_SIGNATURE_SECRET=signature_secret_dev_xyz

# Tempo de expiração dos tokens (em horas)
TOKEN_EXPIRY_HOURS=24

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# SQLite database path (desenvolvimento local)
DATABASE_URL=sqlite:///./cappta_simulator.db

# Connection pool settings
DATABASE_POOL_SIZE=10
DATABASE_ECHO=false

# =============================================================================
# WEBHOOK SYSTEM
# =============================================================================
# Número máximo de tentativas de reenvio
WEBHOOK_RETRY_ATTEMPTS=5

# Delay inicial para retry (segundos)
WEBHOOK_RETRY_DELAY=60

# Timeout por requisição de webhook (segundos)
WEBHOOK_TIMEOUT=30

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Sentry DSN para error tracking (opcional)
SENTRY_DSN=

# Habilitar métricas Prometheus
PROMETHEUS_ENABLED=false

# Intervalo de health checks (segundos)
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Para ambiente de produção (dev2), ajustar:
# ENVIRONMENT=production
# DEBUG=false
# BASE_URL=https://simulador-cappta.kabran.com.br
# ALLOWED_IPS=["IP_ESPECIFICO_DEV2", "IP_TRICKET"]
# LOG_LEVEL=warning
# PROMETHEUS_ENABLED=true

# =============================================================================
# NOTES
# =============================================================================
# 1. A API_KEY do Asaas deve ser obtida da conta dedicada ao simulador
# 2. O subdomínio simulador-cappta.kabran.com.br já foi configurado
# 3. Todos os secrets devem ser únicos por ambiente
# 4. Para produção, usar HTTPS e restringir IPs permitidos